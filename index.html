<!DOCTYPE html>
<html>
<head>
    <title>Home &mdash; KaylaDnls.com &mdash; </title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <link href='http://fonts.googleapis.com/css?family=Raleway:400,300,700,900' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open Sans:400,300,700,900' rel='stylesheet' type='text/css'>

    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="stylesheet" href="http://kayladnls.com/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://kayladnls.com/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="http://kayladnls.com/css/main.css">
    <link rel="stylesheet" href="http://kayladnls.com/css/custom.css">

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-37747212-2', 'auto');
        ga('send', 'pageview');

    </script>
</head>
<body class="left-sidebar">

<!--START MENU-->
    <nav class="menu">
      <!--START SEARCH INPUT-->
      <div class="input-group search-group">
        <form action=""><span class="input-group-btn">
            <button type="button" class="btn"><i class="fa fa-search"></i></button></span>
          <input type="text" placeholder="Search..." name="search" class="form-control">
          <input type="submit" value="submit" class="hidden">
        </form>
      </div>
      <!--END SEARCH INPUT-->

      <!--START MENU BUTTON-->
      <button class="menu-button closed"><span class="icon top"></span><span class="icon middle"></span><span class="icon bottom"></span></button>
      <!--END MENU BUTTON-->

      <!--START MENU LIST-->
         <ul class="nav">
             <li><a class="active" href="http://kayladnls.com">Home</a></li>
             <li><a href="http://kayladnls.com/blog">Archive</a></li>
             <li><a href="http://kayladnls.com/blog/categories">Categories</a></li>
             <li><a href="http://kayladnls.com/about">About</a></li>
             <li>-------</li>
             <li>
                <a class="contact" href="http://twitter.com/kayladnls">
                    <i class="fa fa-twitter"></i>
                </a>
                <a class="contact" href="mailto:kayladnls@gmail.com">
                    <i class="fa fa-envelope"></i>
                </a>
                <a class="contact" class="active" href="http://github.com/kayladnls">
                    <i class="fa fa-github"></i>
                </a>
             </li>
             <li>-------</li>
             <li>Projects</li>
             <li><a href="http://codemanifesto.com/">Code Manifesto</a></li>
             <li><a href="http://nocapes.github.io/">No Capes</a></li>
             <li><a href="http://hackthestigma.org/">#HackTheStigma</a></li>

         </ul>

      <!--END MENU LIST-->
    </nav>
    <!--END MENU--><main role="main" id="main-container">
    <section class="line header-line">
        <div class="container">
            <div class="row">
                <div class="col-sm-9 col-sm-offset-2">
                    <a href="#" class="page-title">
                        <h1 class="brand">Kayla Daniels</h1>
                        <img src ="https://secure.gravatar.com/avatar/ef04d6e7580b2d5f5484675bed85525b?s=150" class="circle"/>
                    </a>
                </div>
            </div>
        </div>
    </section>
    <section class="line">
        <div class="container">
            <div class="row">
                <div class="col-sm-11 col-sm-offset-1">
                    <!--START BLOG POSTS-->
                    <div class="posts">
                                                        <article class="post">
        <div class="row">
            <div class="col-sm-2">
                <ul class="post-info">
                    <li>
                        Dec 19, 2014
                    </li>
                                        <li class="hidden-xs">
                        Categories:
                                                <a class="label labe-default label-pink" href="http://kayladnls.com/blog/categories/Machine%20Learning">Machine Learning</a>
                                                <a class="label labe-default label-pink" href="http://kayladnls.com/blog/categories/Nerd">Nerd</a>
                                            </li>
                                    </ul>
            </div>
            <div class="col-sm-10">
                <a class="post-title" href="http://kayladnls.com/2014/12/19/least-squares">Method of Least Squares: Using squares to calculate a hat.</a>

                <div class="post-content">
                    <div class="text-editor">
                        <p>In my previous <a href="http://kayladnls.com/2014/12/11/machine-learning/">post on Machine Learning</a>, I mentioned supervised and unsupervised methods. We also discussed the two main kinds of supervised methods: continuous and categorical. Today we're going to talk about one of the continuous methods: <strong>Method of Least Squares.</strong> (LSM). LSM is a method of linear regression, which was also briefly mentioned in the previous post.</p>

<blockquote>
  <p>Linear Regression is the process of finding a line/curve that best fits a set of data.</p>
</blockquote>

<p>LSM is probably the most popular technique in statistics, and also one of the oldest. How does it work? It operates off the principle that the mean of a distribution is the value that minimizes the sum of squared deviations of the scores. [1]</p>

<p>Now, maybe you're thinking: say what?  Great! Then I'm not the only one.</p>

<p>So what is it really saying? The goal, when doing regression is to try to find a line (or curve) that best fits your training dataset. The idea being that this line will provide a reasonable estimate for future real world data, and that you will be able to make predictions based on that line. Given a value (x) you will be able to estimate the resultant (y) value, also referred to as Y-hat.</p>

<p>With LSM, you draw that line by minimizing the squared distance between each point in your distribution (dataset) and your estimate. Why squares and not just the distance value itself? Squares allow all of the residuals to be treated as a continuous differentiable quantity [2].</p>

<p>The values along the x axis are referrred to as the dependant variable, and the y axis is the independant variable.</p>

<p>You want to create a function that best estimates future y, given an x value. That function can be represented by a line. In slope intercept form:</p>

<p>(1) <img src="http://chart.apis.google.com/chart?cht=tx&amp;chl=%5Chat%7BY%7D%20%3D%20a%20%2BbX" alt="image" /></p>

<p>Where <code>Y</code> is the <strong>predicted value</strong>, <code>m</code> is the <strong>slope</strong> and <code>b</code> is the <strong>y-intercept</strong> of the line,</p>

<p>You want a line that is going to be closest to your data, that is, where the distance between the points and the estimation line is the smallest. The distance between the actual points and your estimation line is the error, and obviously, you want to minimize error, to increase accuracy.</p>

<p>(2) <img src="http://chart.apis.google.com/chart?cht=tx&amp;chl=%5Cvarepsilon%20%3D%20%3D%5Csum_%7Bi%7D%20(Y_%7Bi%7D%20-%20%5Chat%7BY%7D_%7Bi%7D)%5E2%20%3D%20%5Csum_%7Bi%7D%20%5B%20Y_%7Bi%7D%20-%20(a%20%2B%20bX_%7Bi%7D)%5D%5E2" alt="image" /><br />
Where E represents the error. you're minimizing.</p>

<p>Knowing that a quadratic equation reaches it's minimum when as it's derivatives approaches zero, we'll take the derivative of E with respect to both unknowns, a and b and set each of them to 0. These are called the normal equations.</p>

<p>(3) <img src="http://chart.apis.google.com/chart?cht=tx&amp;chl=%5Cpartial%20%20%5Cvarepsilon%20%2F%20%5Cpartial%20a%20%3D%202Na%20%2B%202b%20%5Csum%20X_%7Bi%7D%20-%202%5Csum%20Y_%7Bi%7D%20%3D%200" alt="image" /></p>

<p>and</p>

<p>(4) <img src="http://chart.apis.google.com/chart?cht=tx&amp;chl=%5Cpartial%20%20%5Cvarepsilon%20%2F%20%5Cpartial%20b%20%3D%202b%20%5Csum%20X%5E2_%7Bi%7D%20%2B%202a%20%5Csum%20X_%7Bi%7D%20-%202%20%5Csum%20Y_%7Bi%7DX%7Bi%7D%20%3D%200" alt="image" /></p>

<p>Solve those normal equations and you will end up with:</p>

<p>(5) <img src="http://chart.apis.google.com/chart?cht=tx&amp;chl=a%20%3D%20M_%7By%7D%20-%20bM_%7Bx%7D" alt="image" /><br />
Where My and Mx are the mean of x and y, respectively.</p>

<p>and</p>

<p>(6) <img src="http://chart.apis.google.com/chart?cht=tx&amp;chl=b%20%3D%20%5Csum%20(Y_%7Bi%7D-M_%7By%7D)(X_%7Bi%7D-M_%7Bx%7D)%2F%20%5Csum%20(X_%7Bi%7D%20-%20M_%7Bx%7D)%5E2" alt="image" /></p>

<p>Now, all of that is a rather math-y representation of the problem, with greek letters a-plenty. It's hard to read, and a bit hard to understand, in my opinion. I much prefer to look at it in code.</p>

<h3>Show me the codez</h3>

<ol>
<li>Calculate the mean (average) of x and y. (bar-x and bar-y, respectively. These values were M<sub>y</sub> and M<sub>x</sub> in the equations above)   </li>
<li>Take the distance from each observation in your training data, to the bar-x and the bar-y.  </li>
<li>Find the slope <code>m</code>.   </li>
<li>Use the point where bar-x and bar-y intersect (<strong>mean-intersect</strong>), along with the slope to calculate the y-intercept of your line.   </li>
<li>Tada! You have a function. Punch in x values and out pop estimated y values ( Y-Hat).    </li>
</ol>

<p>I want to show you what that looks like in code. I've included the table below as a reference, so you can see all of the values that I will be using for this example, as well as bar-x and bar-y.</p>

<table class="table table-bordered table-striped">
<thead>
<tr>
  <th>X</th>
  <th>Y</th>
  <th>x - bar-x</th>
  <th>y - bar-y</th>
  <th>(x-bar-x)<sup>2</sup></th>
  <th>(x-bar-x)(y-bar-y)</th>
</tr>
</thead>
<tbody>
<tr>
  <td>1</td>
  <td>2</td>
  <td>-2</td>
  <td>-2</td>
  <td>4</td>
  <td>4</td>
</tr>
<tr>
  <td>2</td>
  <td>4</td>
  <td>-1</td>
  <td>0</td>
  <td>1</td>
  <td>0</td>
</tr>
<tr>
  <td>3</td>
  <td>5</td>
  <td>0</td>
  <td>1</td>
  <td>0</td>
  <td>0</td>
</tr>
<tr>
  <td>4</td>
  <td>4</td>
  <td>1</td>
  <td>0</td>
  <td>1</td>
  <td>0</td>
</tr>
<tr>
  <td>5</td>
  <td>5</td>
  <td>2</td>
  <td>1</td>
  <td>4</td>
  <td>2</td>
</tr>
</tbody>
</table>

<p>Step 1: Calculate bar-x and bar-y:</p>

<pre><code> $mean_x = $this-&gt;mean($x);
 $mean_y = $this-&gt;mean($y);

 function mean(array $vals) {
        return array_sum($vals) / count($vals);
}
</code></pre>

<p>Step 2: Calculate the distance between each point and bar-x and bar-y
Here we're constructing two arrays that will hold the distance to bar-x and bar-y, for each value of x and y. Keep in mind that each x and y correspond to the x and y coordinates of points on a graph.</p>

<pre><code>$x_minus_barx = array_map(function($x) use($mean_x) {
                return $x - $mean_x;
            }, $x);

$y_minus_bary = array_map(function($y) use($mean_y) {
                return $y - $mean_y;
            }, $y);
</code></pre>

<p>Step 3: Find the slope:
To calculate the slope, you sum the square of $x_minus_barx, this becomes your denimonator. You then sum the values of $x_minus_barx and $y_minus_bary, this becomes your numerator. This fraction becomes your slope.</p>

<p>This corresponds directly to equation (6) above.</p>

<pre><code>$slope = $this-&gt;calcSlope($x_minus_barx, $y_minus_bary);

function calcSlope($x_minus_barx, $bary)
{
    $barxsq = $this-&gt;squareArr($x_minus_barx);

    $barx_times_bary = $this-&gt;multArrs($x_minus_barx, $y_minus_bary);

    return array_sum($barx_times_bary) / array_sum($barxsq);
}
</code></pre>

<p>Step 4: Use the mean-intercept and the slope to calculate the Y Intercept. 
The mean intercept is the point where bar-x and bar-y meet. All regression lines must pass through this point. Since we know that point is on our line, we can you it's X and Y values to calculate the Y-intercept of the line. You do this by rearranging the <code>Y = mX+b</code> function into : <code>b = Y - Mx</code>.</p>

<p>This corresponds directly to equation (5) above.</p>

<pre><code>$y_int = $this-&gt;calcYInt($this-&gt;slope, $mean_intercept);
function calcYInt($slope, $mean_intercept)
{
    return $mean_intercept[1] - ($slope * $mean_intercept[0]);
}
</code></pre>

<p>Step 5: Tada;
At this point, we know the values for our Y-intercept <code>b</code>, and our slope: <code>m</code>. Given any value for X, we can calculate Y.</p>

<pre><code>function estimate($x)
{
    return $this-&gt;y_int + ($this-&gt;slope * $x);
}
</code></pre>

<p>Given the input points <code>{1, 2}, {2, 4}, {3, 5}, {4, 4}, {5, 5}</code>, we find that the slope = .6 and the y-intercept is 2.2.</p>

<p>Graphically this looks like this:<br />
<img src="/img/lms.png" alt="image" /></p>

<p>Each point on the graph represents a datapoint, and the line represents our estimation line. You can see that the line intercepts the y-axis just where we said it would (2.2).</p>

<h3>What does this all mean?</h3>

<p><img src="http://managedaccount.blog.com/files/2012/10/double-rainbow-what-does-this-mean-women-s-t-shirts_design.png" alt="image" /></p>

<p>Let me take a moment to illustrate with an arbitrary example. You have a house you want to sell, you also have the sales data for houses in your town, along with their square footage. Train your function on this dataset, such that square footage vales are along the x-axis and price is along the y-axis. Input the square footage of your soon to be sold home and out comes a reasonable estimate of what your home would sell for.</p>

<p><strong>A little further reading</strong><br />
<a href="https://twitter.com/ianbarber">Ian Barber</a> did a <a href="http://phpir.com/linear-regression-in-php/">post covering Linear Regression</a> that uses a different alogirthm. I wanted to verify my results against his.  If you punch in his input data:</p>

<pre><code>// data x, y
$data = array(
    array(5, 21),
    array(6, 25),
    array(7, 30),
    array(8, 31),
    array(10, 41),
    array(12, 50)
);
</code></pre>

<p>You can verify that the method I've outlined here results in <code>y = 0.29 + 4.08x</code>, which is consistent with the results that he got. The post he wrote is a very good one, and I highly suggest reading it.</p>

<p>There are many other flavors of Least Squares that I will cover in later posts. This method can be extended to non-linear functions, and also to apply to more than one variable, but that will have to wait for another day.</p>

<p>Hopefully you've learned a lot, and as always, feel free to ask questions if anything is unclear.</p>

<blockquote>
  <p>References<br />
  1. Abdi, Herve, The Method of Least Squares <a href="http://www.utd.edu/~herve/Abdi-LeastSquares06-pretty.pdf">http://www.utd.edu/~herve/Abdi-LeastSquares06-pretty.pdf </a><br />
  2. Least Squares Fitting, Wolfram Math World, <a href="http://mathworld.wolfram.com/LeastSquaresFitting.html">http://mathworld.wolfram.com/LeastSquaresFitting.html</a></p>
</blockquote>

                    </div>
                </div>
            </div>
        </div>
    </article>
    <article class="post">
        <div class="row">
            <div class="col-sm-2">
                <ul class="post-info">
                    <li>
                        Dec 19, 2014
                    </li>
                                        <li class="hidden-xs">
                        Categories:
                                                <a class="label labe-default label-pink" href="http://kayladnls.com/blog/categories/Machine%20Learning">Machine Learning</a>
                                                <a class="label labe-default label-pink" href="http://kayladnls.com/blog/categories/Nerd">Nerd</a>
                                                <a class="label labe-default label-pink" href="http://kayladnls.com/blog/categories/Trees">Trees</a>
                                            </li>
                                    </ul>
            </div>
            <div class="col-sm-10">
                <a class="post-title" href="http://kayladnls.com/2014/12/19/binary-trees">Binary and AVL and black-red oh my!</a>

                <div class="post-content">
                    <div class="text-editor">
                        
                    </div>
                </div>
            </div>
        </div>
    </article>
    <article class="post">
        <div class="row">
            <div class="col-sm-2">
                <ul class="post-info">
                    <li>
                        Dec 13, 2014
                    </li>
                                        <li class="hidden-xs">
                        Categories:
                                                <a class="label labe-default label-pink" href="http://kayladnls.com/blog/categories/Machine%20Learning">Machine Learning</a>
                                                <a class="label labe-default label-pink" href="http://kayladnls.com/blog/categories/Nerd">Nerd</a>
                                                <a class="label labe-default label-pink" href="http://kayladnls.com/blog/categories/Trees">Trees</a>
                                            </li>
                                    </ul>
            </div>
            <div class="col-sm-10">
                <a class="post-title" href="http://kayladnls.com/2014/12/13/ternary-trees">Ternary Trees -- An Excursion over mountains.</a>

                <div class="post-content">
                    <div class="text-editor">
                        <p>TIL: Mathematicians may be outdoorsy people. They have words like trees, excursion, bridge, walk, path, meander. We're going to use all of these words rather frequently in this post. If you read it fast enough, it might even feel like we're talking about hiking.</p>

<p>Most of what I learned in research for this post came from Donald Knuth's 20th Anniversary Christmas Tree lecture [1]. Go, watch it, enjoy it, let it blow your mind. It's 76 minutes long and I was able to savor it for pretty much an entire day, and I can't promise that I won't be going back for seconds at some later date.</p>

<h4>Trees</h4>

<p>Today our main focus is going to be trees. As computer scientists, trees are highly important, and there are many different varieties. Trees with one node are called unary trees, two nodes are binary trees. three nodes are ternary, so forth and so on. Really, a tree can be made from any number. You can have pi-ary trees, 3/2-ary (said three-halfs-ary) trees, etc.</p>

<p>Today we wil focus primarily on ternary trees. For every node on a ternary tree, it will either be empty, or have three more ternary trees below it.  That looks something like this:</p>

<p><img src="/img/t-tree.jpg" alt="image" /><br />
Each circle represents a node, each square is empty.</p>

<p>To process a tree, we walk it, and generally we do that using a stack. For a ternary tree, when you encounter a square, you add one, when you encounter a circle, you subtract two. Every ternary tree will start out with an empty stack, and will end with an empty stack. This kind of walk is alled an <strong>excursion</strong>.</p>

<p>Let me take a minute to define the four main different kinds of walks:<br />
<img src="/img/walks.png" alt="image" /><br />
This image is a screen shot taken from Knuth's video. It's taken from a paper written by Cyril Banderier and Phillepe Flajolet [2] .</p>

<p>You can read the above as this:<br />
<strong>walk(<em>W</em>)</strong> : a walk that can fall above or below the x axis, and ends anywhere it pleases.<br />
<strong>bridge (<em>B</em>)</strong>:  just like a walk, but it MUST end at 0.<br />
<strong>meander (<em>M</em>)</strong>:  similar to a walk, except that MUST stay above the x axis. It can end where it pleases, though.<br />
<strong>excursion (<em>E</em>)</strong>: like a meander, in that it must be above the x axis, but like a bridge in that it must also end at 0.</p>

<p>So, when I say that a good ternary tree is an <strong>excursion</strong> what I mean is that it <strong>MUST</strong> stay above the x axis (y is always >= 0), and that it <strong>MUST</strong> end at (y == 0).</p>

<h4>Walks over Mountains</h4>

<p>A good visual of this is:<br />
<img src="/img/mountains.png" alt="image" /><br />
Also taken from Knuth's video</p>

<p>Remember from the previous drawing that our squares are +1 and our circles are -2. He's numbered the squares and lettered the circles for the above drawing. With that in mind, you can see that each time you encounter a number (square), you add one to the stack, and y increases by 1. Each time you encounter a letter (circle), you subtract 2, and y decrease by 2.</p>

<p>So how many possible ways are there are walking a ternary tree?</p>

<p>As we go through this, picture a graph in your mind, much like the mountains pictured above.</p>

<p>Exponents represent points on that graph, where <strong>z's</strong> exponent is the x coordinant and <strong>u's</strong> exponent is the y axis. <strong>z<sup>3</sup>u<sup>4</sup></strong> represents a pt (3,4) on that graph.</p>

<p>Coefficients will represent the different number of ways we could have gotten to that point at that step of the walk. <strong>3u</strong> means there were 3 different ways to get to u.</p>

<p>To help with this visualization, I will write both the exponential form of the step, but also the point that it would represent on the graph.</p>

<p>We start at the origin 0 == 1 (0, 0)<br />
1. <strong>First step</strong> our only option is to go right one, and up one. --> z<sup>1</sup>u<sup>1</sup> --> (1, 1)<br />
2. <strong>Second step</strong>, our only option is right one, up one    --> z<sup>2</sup>u<sup>2</sup> --> (2, 2)<br />
3. <strong>Third step</strong>, we can either go up one, or down two            --> z<sup>3</sup>(1 + u<sup>3</sup>) --> possible points here are (3, 0), (3, 3)<br />
4. <strong>Fourth step</strong>, remember from the previous line that we're currently either sitting at 0, or 3. So, we can go up one to u<sup>1</sup>, or down two to u<sup>1</sup>, or up one to u<sup>4</sup>)  --> z<sup>4</sup>(2u + u<sup>4</sup>), three options: (4, 1), (4,1), (4, 4);<br />
5. <strong>Fifth step</strong>,  there are three ways to get to u<sup>2</sup> and one way to get to u<sup>5</sup> --> z<sup>5</sup>(3u<sup>2</sup>+u<sup>5</sup>) (5, 2), (5, 2), (5, 2) (5, 5)<br />
6. <strong>Sixth step</strong> There are 3 ways to get to zero, 5 ways to get to u<sup>3</sup> and one way to get to u<sup>6</sup> --> z<sup>6></sup>(3 + 4u<sup>4</sup> + u<sup>6</sup>) (6, 0), (6, 0), (6, 0), (6, 3), (6, 3), (6, 3), (6, 3), (6, 6)</p>

<p>So far, we are 6 steps into our walk, and we have following equation.</p>

<p><strong>z<sup>1</sup>u<sup>1</sup> + z<sup>2</sup>u<sup>2</sup> + z<sup>3</sup>(1 + u<sup>3</sup>) + z<sup>4</sup>(2u + u<sup>4</sup>) + z<sup>5</sup>(3u<sup>2</sup>+u<sup>5</sup>) + z<sup>6</sup>(3 + 4u<sup>4</sup> + u<sup>6</sup>)</strong></p>

<p>At this point, if you remove the z's and u's and focus solely on the coefficients and exponents of u, you are able to place them into a table. Treating each row as an "iteration" and each column as a point u<sup>x</sup>, you can see the various different ending points that would be available on any artbitrary z-length <strong>meander</strong> along a ternary tree.</p>

<p>Each number on the following graph represents the number of possibilities your meander would have to end at that point, given that length (z).</p>

<table class="table table-striped">
<thead>
<tr>
  <th>z = 0</th>
  <th>1</th>
  <th></th>
  <th></th>
  <th></th>
  <th></th>
  <th></th>
  <th></th>
  <th></th>
  <th></th>
</tr>
</thead>
<tbody>
<tr>
  <td>z == 1</td>
  <td>0</td>
  <td>1</td>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td>z == 2</td>
  <td>0</td>
  <td>0</td>
  <td>1</td>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td>z == 3</td>
  <td>1</td>
  <td>0</td>
  <td>0</td>
  <td>1</td>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td>z == 4</td>
  <td>0</td>
  <td>2</td>
  <td>0</td>
  <td>0</td>
  <td>1</td>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td>z == 5</td>
  <td>0</td>
  <td>0</td>
  <td>3</td>
  <td>0</td>
  <td>0</td>
  <td>1</td>
  <td></td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td>z == 6</td>
  <td>3</td>
  <td>0</td>
  <td>0</td>
  <td>4</td>
  <td>0</td>
  <td>0</td>
  <td>1</td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td>z == 7</td>
  <td>0</td>
  <td>7</td>
  <td>0</td>
  <td>0</td>
  <td>5</td>
  <td>0</td>
  <td>0</td>
  <td>1</td>
  <td></td>
</tr>
<tr>
  <td>z == 8</td>
  <td>0</td>
  <td>0</td>
  <td>12</td>
  <td>0</td>
  <td>0</td>
  <td>6</td>
  <td>0</td>
  <td>0</td>
  <td>1</td>
</tr>
<tr>
  <td></td>
  <td>u<sup>0</sup></td>
  <td>u<sup>1</sup></td>
  <td>u<sup>2</sup></td>
  <td>u<sup>3</sup></td>
  <td>u<sup>4</sup></td>
  <td>u<sup>5<sup></sup></sup></td>
  <td>u<sup>6</sup></td>
  <td>u<sup>7</sup></td>
  <td>u <sup>8</sup></td>
</tr>
</tbody>
</table>

<p>What patterns can we see here? As you move onto the next row, you look at the row above you.</p>

<p>We know that we are constrained to steps of either +1, -2. In this case, adding moves you to the left, subtracting moves you to the right.  So, to determine each cell in a new row, look at the cell directly above it. Go one cell back, then go two cells forward, add those two numbers, and that's the number that goes in the cell in question.</p>

<p>Look at row 8. How did we get 12? Up one, left one (+1), up one, right 2 (-2) gives up 7 and 5, those combine to equal 12.</p>

<p>If you're looking for a function to generate such a table, have no fear! I have you covered:</p>

<pre><code>$rows = array();

$line1 = array(1);
$rows[] = $line1;

$iterations = 25;

for ($row = 1; $row&lt; $iterations; $row++)
{
    $line = array();
    for($column = 0; $column &lt;= $row; $column++)
    {
         $first_number  = isset($rows[$row - 1 ][$column - 1 ]) ? $rows[$row - 1 ][$column - 1 ] : 0;
         $second_number = isset($rows[$row - 1 ][$column + 2 ]) ? $rows[$row - 1 ][$column + 2 ] : 0;

        $line[] = $first_number + $second_number;
    }
    $rows[] = $line;
}

foreach ($rows as $row)
{
    foreach ($row as $cell)
    {
        echo $cell."\t";
    }
    echo "\n";
}        

</code></pre>

<p>Okay, so this is all good and fine. You can draw a tree with circles and squares, and you can walk that tree to make a nice mountain picture. You can even manually calculate each possibilities, to a certain extent. Lovely. But what if I asked you to tell me how many different mountain pictures you could draw, with a tree of X nodes? How would you be able to tell me?</p>

<p>Or, perhaps I ask you to tell me what position of y you might be at, after you've "walked" 4 steps?</p>

<p>Sure, you could draw all of those mountains and walk all of those trees, but that sounds awfully tiring. It would be much better if you knew a formula to do that. Even better still if you could translate that formula into some code and make your computer do all the legwork, right?</p>

<p>Great, let's do that.</p>

<h4>These computes were made for walkin...</h4>

<p>There are some fairly famous numbers called Catalan numbers that are used to find the number of binary trees with N nodes. These numbers were defined by Eugene Charles Catalan[3] (he's a cool cat, you should look him up).</p>

<p>Catalan numbers are defined as follows:<br />
<img src="/img/catalan.jpg" alt="image" /></p>

<p>For anyone who needs a refresher (I was completely lost here for a bit, so let me save you the trouble), the (2n n) is a binomial coefficient, which is calculated as follows:<br />
<img src="/img/bico.jpg" alt="image" /></p>

<p>with n! denoting a factorial.</p>

<p>When you run that function for a given N, you're able to find out the number of binary trees with N many nodes. The sequence of those values are known as the Catalan numbers:  1, 1, 2, 5, 14, 42, 132.. etc etc etc.</p>

<p>Wait,... why am I talking about Catalan numbers? Those only apply to binary trees, and we're interested in ternary trees, right?  Well, you can generalize that catalan function to work for other trees as well!</p>

<p>That generalized function looks like this:<br />
<img src="/img/fuss-catalan.jpg" alt="image" /></p>

<p>Where x denotes the type of tree (1 for unary, 3 for ternary, etc) and n denotes the number of nodes we're asking about. If I want to know how many ternary trees with 4 internal nodes, I would do x = 3 (for ternary) and n = 4.  As promised, let's have our computer take care of the heavy lifting:</p>

<pre><code>$n = 4;
function ternary($n)
{
    return pow(((2*$n) + 1), -1) * binomialCoefficient((3*$n), $n);
}

echo ternary($n);
</code></pre>

<p>The answer? 55.</p>

<p>So, that's neat, and you can feel free to play around with it, popping in different values for x and n. But what about the sequence? There is a sequence of Catalan numbers corresponding to each n internal nodes on a binary tree. Can we do the same thing for our ternary trees? But of course we can!</p>

<p>The function to generate the sequence for ternary trees looks like this:<br />
<img src="/img/tofz.jpg" alt="image" /></p>

<p>Where t is the number denoting the type of tree (just like x did above), k is the number of "steps" you want to take (just like n above) and r is the number of trees you want to consider (yes, you can do more than one tree at a time).</p>

<pre><code>$t = 3;
$r = 1;
$k = 4;

$arr = array_fill(0, $k, 0);

$string_answer = "1 +";
foreach ($arr as $idx =&gt; $value)
{
    $i = $idx + 1;
    $n1 = ($t*$i) + $r;
    $n2 = $i;

    $bc = binomialCoefficient($n1, $n2);
    $answer = $bc * ($r/(($t*$i) +$r));

    $string_answer .= strval($answer)."z^".$i." + ";
}
</code></pre>

<p>What comes out?   <strong>1 + 1z<sup>1</sup> + 3z<sup>2</sup> + 12z<sup>3</sup> + 55z<sup>4</sup></strong><br />
You can see from this that the sequence of the first 4 numbers for ternary trees is: 1, 1, 3, 12, 55,</p>

<p>One last thing, the icing on the cake, if you will. Take a look back up at the table that we built earlier. You can see we only got 8 steps in manually, but if you run the code provided I took it out to 25 steps. Remove all of the zeroes, and then look at the left most column.</p>

<p>What do you see? 1, 1, 3, 12, 55. That looks familiar, doesn't it? That's because that column corresponds to the times when your walk ends at u<sup>0</sup> or y == 0. Recall that terniary trees are all <strong>excursions</strong> and must begin their walk at 0, and all of them must complete their walk at 0, and this makes perfect sense.</p>

<p>For a little extra<br />
<img src="http://i3.kym-cdn.com/entries/icons/original/000/009/993/tumblr_m0wb2xz9Yh1r08e3p.jpg" alt="image" /><br />
The row second from the left corresponds to the sequence of numbers for <strong>B<sub>3</sub>(z)<sup>2</sup></strong> that is, squared ternary trees. The third row from the left corresponds to the cubed function, so on and so forth. You can use the code above to prove that, switching out the different numbers for r.</p>

<blockquote>
  <p>Notes<br />
  1. Yes, I know my hand writing is attrocious.<br />
  2. Galaxy note pen is awesome for this stuff.<br />
  3. It took me about 10 hours to watch that 76 minute video and glean this knowledge, so if it doesn't 'click' don't worry .<br />
  4. There's a lot in the video I didn't cover here. Specifically anything having to do with 3/2-trees as well as Duchon numbers, but I do have notes on all of it, if you're interested.<br />
  5. If you have questions on any of this, feel free to reach out, I'm happy to answer them <a href="mailto:kayladnls@gmail.com">email</a> or <a href="http://twitter.com/kayladnls">twitter</a></p>
  
  <p>References:<br />
  [1] Donald Knuth's 20th Annual Christmas Tree Lecture: (3/2)-ary Trees, <a href="https://www.youtube.com/watch?v=P4AaGQIo0HY">https://www.youtube.com/watch?v=P4AaGQIo0HY</a><br />
  [2] Basic Analytic combinators of directed lattice paths, Bandierier, Cyril &amp; Flajolet, Phillippe<br />
  [3] Eugène Charles Catalan, <a href="http://en.wikipedia.org/wiki/Eug%C3%A8ne_Charles_Catalan">http://en.wikipedia.org/wiki/Eug%C3%A8ne_Charles_Catalan</a></p>
</blockquote>

                    </div>
                </div>
            </div>
        </div>
    </article>
    <nav>
        <br />
        <a href="http://kayladnls.com/page/2">Older Posts</a><br />
    </nav>
                                           </div>
                </div>

            </div>
        </div>
    </section>
</main>

    <footer>
      <section class="main-footer">
        <div class="copyright">
              &copy; 2014 KaylaDnls.com
        </div>
      </section>
    </footer>
    <!--END MAIN CONTAINER-->

    <!--SCRIPTS-->
    <script src="http://kayladnls.com/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    <script src="http://kayladnls.com/js/vendor/jquery-1.10.1.min.js"></script>
    <script src="http://kayladnls.com/js/vendor/bootstrap.min.js"></script>
    <script src="http://kayladnls.com/js/vendor/jquery.isotope.min.js"></script>
    <script src="http://kayladnls.com/js/vendor/jquery.isotope.perfectmasonry.js"></script>
    <script src="http://kayladnls.com/js/vendor/jquery.nivo.slider.js"></script>
    <script src="http://kayladnls.com/js/plugins/jplayer/jquery.jplayer.min.js"></script>
    <script src="http://kayladnls.com/js/plugins/jplayer/add-on/jplayer.playlist.min.js"></script>
    <script src="http://kayladnls.com/js/main.js"></script>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="http://kayladnls.com/components/jquery/jquery.min.js"><\/script>')</script>
    <script src="http://kayladnls.com/components/bootstrap/js/bootstrap.min.js"></script>
        
    <script src="http://kayladnls.com/components/highlightjs/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    </body>
    </html>